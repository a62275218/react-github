{"version":3,"sources":["components/Home.jsx","utils/function.js","utils/date.js","utils/http.js","config/index.js"],"names":["today","Date","theme","createMuiTheme","palette","primary","main","Home","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","loadMore","asyncToGenerator","regenerator_default","a","mark","_callee","res","wrap","_context","prev","next","setState","loadingMore","newsapi","everything","q","state","input","from","convertDate","fromD","to","toD","sortBy","language","page","sent","status","prevState","articles","concat","t0","console","log","finish","stop","handleSearch","_callee2","_context2","loading","totalResults","setTimeout","element","document","getElementById","scrollIntoView","behavior","block","handleDateChange","source","date","defineProperty","handleOptionChange","key","e","target","value","handleInputChange","handleImgLoad","ref","React","createRef","getTime","selection","name","options","label","_this2","window","addEventListener","fun","delay","last","deferTimer","args","that","_args","arguments","now","clearTimeout","apply","throttle","body","documentElement","scrollTop","clientHeight","scrollHeight","keyCode","_this3","_this$state","react_default","createElement","react","styles","className","TextField_default","style","width","type","onChange","Button_default","variant","color","onClick","size","CircularProgress_default","autoComplete","map","item","index","FormControl_default","InputLabel_default","Select_default","option","MenuItem_default","material_ui_pickers_esm","utils","DateFnsUtils","length","id","title","src","urlToImage","onLoad","Loading","Component","__webpack_require__","d","__webpack_exports__","showTimeDiff","out","getFullYear","getMonth","getDate","milli","leftHours","Math","floor","leftMinutes","NewsAPI","v2","axios","create","timeout"],"mappings":"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","file":"static/js/2.7e9068ca.chunk.js","sourcesContent":["import React, {Component, Fragment} from 'react';\nimport {newsapi} from '../utils/http';\nimport {convertDate} from '../utils/date';\nimport {throttle} from '../utils/function'\nimport Loading from './common/Loading'\nimport FormControl from '@material-ui/core/FormControl';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport TextField from '@material-ui/core/TextField';\nimport Select from '@material-ui/core/Select';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport DateFnsUtils from '@date-io/date-fns';\nimport Button from '@material-ui/core/Button';\nimport {createMuiTheme, MuiThemeProvider} from '@material-ui/core/styles';\nimport {MuiPickersUtilsProvider, DatePicker} from 'material-ui-pickers';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\n\nconst today = new Date();\n\nconst theme = createMuiTheme({\n    palette: {\n        primary: {main: '#4eb3e5'},\n    },\n});\n\nclass Home extends Component {\n    constructor(props) {\n        super(props);\n        this.ref = React.createRef();\n        this.state = {\n            loading:false,\n            page:1,\n            articles: [],\n            totalResults: null,\n            input: '',\n            loadingMore:false,\n            // one week\n            fromD: new Date(today.getTime() - 7 * 24 * 60 * 60 * 1000),\n            toD: today,\n            sortBy: 'publishedAt',\n            language: 'en',\n            selection: [\n                {\n                    name: 'Sort By',\n                    key: 'sortBy',\n                    options: [\n                        {\n                            label: 'Publish Time',\n                            value: 'publishedAt'\n                        },\n                        {\n                            label: 'Relevancy',\n                            value: 'relevancy'\n                        },\n                        {\n                            label: 'Popularity',\n                            value: 'popularity'\n                        }\n                    ]\n                },\n                {\n                    name: 'Language',\n                    key: 'language',\n                    options: [\n                        {\n                            label: 'English',\n                            value: 'en'\n                        },\n                        {\n                            label: 'French',\n                            value: 'fr'\n                        },\n                        {\n                            label: 'Italian',\n                            value: 'it'\n                        },\n                        {\n                            label: 'Chinese',\n                            value: 'zh'\n                        }\n                    ]\n                }\n            ]\n        }\n    }\n\n    componentDidMount(){\n        window.addEventListener('scroll',(e)=>{\n            throttle(()=>{\n                let body = document.documentElement;\n                if(body.scrollTop + body.clientHeight >= body.scrollHeight){\n                    this.loadMore();\n                }\n            },50).apply(this)\n        });\n        window.addEventListener('keyup',(e)=>{\n            if(e.keyCode === 13){\n                this.handleSearch();\n            }\n        })\n    }\n\n    loadMore = async () => {\n        this.setState({\n            loadingMore:true\n        });\n        try {\n            let res = await newsapi.everything({\n                q: this.state.input,\n                from: convertDate(this.state.fromD),\n                to: convertDate(this.state.toD),\n                sortBy: this.state.sortBy,\n                language: this.state.language,\n                page:++this.state.page\n            });\n            if (res.status === 'ok') {\n                this.setState(prevState=>({\n                    articles: prevState.articles.concat(res.articles)\n                }))\n            }\n        } catch (err) {\n            console.log(err)\n        } finally {\n            this.setState({\n                loadingMore: false\n            })\n        }\n    };\n\n\n    handleSearch = async () => {\n        this.setState({\n            loading:true\n        });\n        try {\n            let res = await newsapi.everything({\n                q: this.state.input,\n                from: convertDate(this.state.fromD),\n                to: convertDate(this.state.toD),\n                sortBy: this.state.sortBy,\n                language: this.state.language,\n                page:this.state.page\n            });\n            if (res.status === 'ok') {\n                this.setState({\n                    totalResults: res.totalResults,\n                    articles: res.articles\n                },()=>{\n                    setTimeout(function() {\n                        let element = document.getElementById('article');\n                        if(element) {\n                            element.scrollIntoView({\n                                behavior: 'smooth',\n                                block: 'nearest'\n                            })\n                        }\n                    }, 100);\n                })\n            }\n            console.log(this.state)\n        } catch (err) {\n            console.log(err)\n        } finally {\n            this.setState({\n                loading: false\n            })\n        }\n    };\n\n    handleDateChange = source => date => {\n        this.setState({\n            [source]: date\n        });\n    };\n\n    handleOptionChange = key => e => {\n        console.log(key);\n        this.setState({\n            [key]: e.target.value\n        });\n        console.log(e.target.value)\n    };\n\n    handleInputChange = (e) => {\n        this.setState({\n            input: e.target.value\n        })\n    };\n\n    handleImgLoad=(e)=>{\n    };\n\n    render() {\n        const {selection, fromD, toD, articles,loading,totalResults,loadingMore} = this.state;\n        return (\n            <Fragment>\n                <MuiThemeProvider theme={theme}>\n                    <div className={'home-container'}>\n                        <div className={'box search-bar'}>\n                            <TextField\n                                style={{width: '80%'}}\n                                label=\"Search News...\"\n                                type=\"search\"\n                                onChange={this.handleInputChange}\n                            />\n                            <Button\n                                type=\"submit\"\n                                variant=\"contained\"\n                                color=\"primary\"\n                                onClick={this.handleSearch}\n                                style={{color: '#fff'}}\n                                size={'medium'}\n                            >\n                                {loading?<CircularProgress size={28} color=\"white\"/>:'Search'}\n                            </Button>\n                        </div>\n                        <div className={'box home-search'}>\n                            <div>Advanced Search</div>\n                            <form autoComplete={'off'}>\n                                <div className={'option-container'}>\n                                    {\n                                        selection.map((item, index) => {\n                                            return <FormControl key={index}>\n                                                <InputLabel>{item.name}</InputLabel>\n                                                <Select\n                                                    className={'select-box'}\n                                                    value={this.state[item.key]}\n                                                    onChange={this.handleOptionChange(item.key)}\n                                                >\n                                                    {item.options.map((option, index) => {\n                                                        return <MenuItem key={index}\n                                                                         value={option.value}\n                                                        >\n                                                            {option.label}\n                                                        </MenuItem>\n                                                    })}\n                                                </Select>\n                                            </FormControl>\n                                        })\n                                    }\n\n                                </div>\n                                <div className={'option-container'}>\n                                    <MuiPickersUtilsProvider utils={DateFnsUtils}>\n                                        <div className={'select-box'}>\n                                            <DatePicker\n                                                label=\"From\"\n                                                value={fromD}\n                                                onChange={this.handleDateChange('fromD')}\n                                            >\n                                            </DatePicker>\n                                        </div>\n                                        <div className={'select-box'}>\n                                            <DatePicker\n                                                label=\"To\"\n                                                value={toD}\n                                                onChange={this.handleDateChange('toD')}\n                                            >\n                                            </DatePicker>\n                                        </div>\n                                    </MuiPickersUtilsProvider>\n                                </div>\n                            </form>\n                        </div>\n                    </div>\n                </MuiThemeProvider>\n                {articles.length > 0 ?\n                    <div className={'article-list'} id={\"article\"}>\n                        <div className={'article-count'}>Found: {totalResults} Records</div>\n                        {articles.map((item, index) => {\n                            return <div key={index} className={'article-block'}>\n                                <div className={'article-frame'}>\n                                    <div>{item.title}</div>\n                                    <div className={'article-img'}>\n                                        <img\n                                            src={item.urlToImage || 'http://placehold.jp/24/cccccc/ffffff/300x150.png?text=Not%20Found'}\n                                            onLoad={this.handleImgLoad}\n                                        />\n                                    </div>\n                                </div>\n                            </div>\n                        })}\n                    </div> : ''}\n                {\n                    loadingMore?<div className={'bot-loading'}>\n                        <Loading/>\n                    </div>:''\n                }\n            </Fragment>\n        );\n    }\n}\n\nexport default Home;\n","export const throttle = (fun, delay)=> {\n    let last, deferTimer\n    return function (args) {\n        let that = this;\n        let _args = arguments\n        let now = +new Date()\n        if (last && now < last + delay) {\n            clearTimeout(deferTimer);\n            deferTimer = setTimeout(function () {\n                last = now;\n                fun.apply(that, _args)\n            }, delay)\n        }else {\n            last = now;\n            fun.apply(that,_args)\n        }\n    }\n};\n\nexport const debounce = (fun, delay)=>{\n    return function (args) {\n        let that = this\n        let _args = args\n        clearTimeout(fun.id)\n        fun.id = setTimeout(function () {\n            fun.call(that, _args)\n        }, delay)\n    }\n};\n\nexport const reachBottom= ()=>{\n\n};","export const convertDate = (date,today) => {\n    let out = today? new Date():new Date(date);\n    return `${out.getFullYear()}-${out.getMonth() + 1}-${out.getDate()}`\n};\n\nexport const showTimeDiff = (date)=>{\n    let gap = new Date().getTime() - new Date(date).getTime();\n    let milli = (gap%(24*3600*1000));\n    let leftHours = Math.floor(milli/(3600*1000));\n    let leftMinutes = Math.floor((milli%(3600*1000))/(60*1000));\n    return leftHours === 0 ?`${leftMinutes} min ago`:`${leftHours} hr ago`;\n};","import axios from 'axios';\nimport apiKey from '../config/index';\nimport NewsAPI from 'newsapi';\n\nexport const newsapi = new NewsAPI(apiKey.newsapi).v2;\n\nexport const baseURL = {\n    news:'https://newsapi.org/v2/top-headlines'\n};\n\nlet $http = axios.create({\n    timeout:300000,\n});\n\nexport default $http;","export default {\n    newsapi:'c81011b157164eb2b2c54679d9f91b9b'\n};"],"sourceRoot":""}